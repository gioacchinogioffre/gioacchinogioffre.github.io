{"ast":null,"code":"import { GET_VIDEOGAME_DETAIL, GET_SEARCH_VIDEOGAMES, DELETE_VIDEOGAME, CREATE_VIDEOGAME, GET_ALL_VIDEOGAMES, GET_GENRES, GET_FILTERS } from '../actions/index';\nconst initialState = {\n  filteredVideogames: [],\n  videogames: [],\n  videogameDetail: [],\n  genres: []\n};\nexport default function rootReducer() {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case GET_ALL_VIDEOGAMES:\n      return { ...state,\n        videogames: action.payload,\n        filteredVideogames: action.payload\n      };\n\n    case GET_SEARCH_VIDEOGAMES:\n      return { ...state,\n        videogames: action.payload\n      };\n\n    case GET_VIDEOGAME_DETAIL:\n      return { ...state,\n        videogameDetail: [action.payload]\n      };\n\n    case CREATE_VIDEOGAME:\n      return { ...state\n      };\n\n    case DELETE_VIDEOGAME:\n      return { ...state\n      };\n\n    case GET_GENRES:\n      return { ...state,\n        genres: action.payload\n      };\n\n    /*\n    GET_VIDEOGAMES_BY_GENRE tiene que filtrar mi actions.payload (videogames) donde alguna propiedad name de los objetos dentro de su propiedad genre (que es un array de genres), coincida con el genre se le pasa como argumento a la action.\n    */\n\n    case GET_FILTERS:\n      console.log(action.payload);\n      let filters = [...state.videogames];\n      let byOrigin = action.payload.filterByOrigin;\n      let byGenre = action.payload.filterByGenre;\n      let byName = action.payload.searchByName;\n      console.log(byName);\n      if (byName) filters = filters.filter(vg => vg.name.toLowerCase().includes(byName.toLowerCase()));\n      if (action.payload.filterByGenre !== 'all') filters = filters.filter(videogame => action.payload.filterByGenre == videogame.genres.find(genre => genre.name == action.payload.filterByGenre).name); // if(action.payload.filterByOrigin !== 'all') {\n      //     if()\n      // }\n      // == videogame.genres.includes(genre => genre.name == action.payload.filterByGenre))\n\n      console.log(filters);\n      return { ...state,\n        filteredVideogames: filters\n      };\n    // return {...state, filteredVideogames:};\n\n    default:\n      return { ...state\n      };\n  }\n}","map":{"version":3,"names":["GET_VIDEOGAME_DETAIL","GET_SEARCH_VIDEOGAMES","DELETE_VIDEOGAME","CREATE_VIDEOGAME","GET_ALL_VIDEOGAMES","GET_GENRES","GET_FILTERS","initialState","filteredVideogames","videogames","videogameDetail","genres","rootReducer","state","action","type","payload","console","log","filters","byOrigin","filterByOrigin","byGenre","filterByGenre","byName","searchByName","filter","vg","name","toLowerCase","includes","videogame","find","genre"],"sources":["/Users/joaco/Desktop/Henry/PI-videogames/PI-Videogames-main/client/src/reducers/index.js"],"sourcesContent":["import { GET_VIDEOGAME_DETAIL, GET_SEARCH_VIDEOGAMES, DELETE_VIDEOGAME, CREATE_VIDEOGAME, GET_ALL_VIDEOGAMES, GET_GENRES, GET_FILTERS} from '../actions/index';\n\n\nconst initialState = {\n    filteredVideogames: [],\n    videogames: [],\n    videogameDetail:[],\n    genres: []\n}\n\nexport default function rootReducer(state = initialState, action) {\n\n    switch(action.type) {\n        case GET_ALL_VIDEOGAMES: return {...state, videogames: action.payload, filteredVideogames:action.payload}\n\n        case GET_SEARCH_VIDEOGAMES: return {...state, videogames: action.payload}\n\n        case GET_VIDEOGAME_DETAIL: return {...state, videogameDetail: [action.payload]}\n\n        case CREATE_VIDEOGAME: return {...state}\n\n        case DELETE_VIDEOGAME: return {...state}\n\n        case GET_GENRES: return {...state, genres: action.payload}\n\n        /*\n        GET_VIDEOGAMES_BY_GENRE tiene que filtrar mi actions.payload (videogames) donde alguna propiedad name de los objetos dentro de su propiedad genre (que es un array de genres), coincida con el genre se le pasa como argumento a la action.\n        */\n\n        case GET_FILTERS: console.log(action.payload); \n        let filters = [...state.videogames]\n        let byOrigin = action.payload.filterByOrigin\n        let byGenre = action.payload.filterByGenre\n        let byName = action.payload.searchByName\n        console.log(byName)\n      \n        if(byName) filters = filters.filter(vg => vg.name.toLowerCase().includes(byName.toLowerCase()))\n\n        if(action.payload.filterByGenre !== 'all') filters = filters.filter(videogame => action.payload.filterByGenre == videogame.genres.find(genre => genre.name == action.payload.filterByGenre).name)\n\n        // if(action.payload.filterByOrigin !== 'all') {\n        //     if()\n        // }\n        // == videogame.genres.includes(genre => genre.name == action.payload.filterByGenre))\n\n\n        console.log(filters)\n\n        return {...state, filteredVideogames: filters}\n\n        // return {...state, filteredVideogames:};\n        \n        default: return {...state}\n\n    }\n}"],"mappings":"AAAA,SAASA,oBAAT,EAA+BC,qBAA/B,EAAsDC,gBAAtD,EAAwEC,gBAAxE,EAA0FC,kBAA1F,EAA8GC,UAA9G,EAA0HC,WAA1H,QAA4I,kBAA5I;AAGA,MAAMC,YAAY,GAAG;EACjBC,kBAAkB,EAAE,EADH;EAEjBC,UAAU,EAAE,EAFK;EAGjBC,eAAe,EAAC,EAHC;EAIjBC,MAAM,EAAE;AAJS,CAArB;AAOA,eAAe,SAASC,WAAT,GAAmD;EAAA,IAA9BC,KAA8B,uEAAtBN,YAAsB;EAAA,IAARO,MAAQ;;EAE9D,QAAOA,MAAM,CAACC,IAAd;IACI,KAAKX,kBAAL;MAAyB,OAAO,EAAC,GAAGS,KAAJ;QAAWJ,UAAU,EAAEK,MAAM,CAACE,OAA9B;QAAuCR,kBAAkB,EAACM,MAAM,CAACE;MAAjE,CAAP;;IAEzB,KAAKf,qBAAL;MAA4B,OAAO,EAAC,GAAGY,KAAJ;QAAWJ,UAAU,EAAEK,MAAM,CAACE;MAA9B,CAAP;;IAE5B,KAAKhB,oBAAL;MAA2B,OAAO,EAAC,GAAGa,KAAJ;QAAWH,eAAe,EAAE,CAACI,MAAM,CAACE,OAAR;MAA5B,CAAP;;IAE3B,KAAKb,gBAAL;MAAuB,OAAO,EAAC,GAAGU;MAAJ,CAAP;;IAEvB,KAAKX,gBAAL;MAAuB,OAAO,EAAC,GAAGW;MAAJ,CAAP;;IAEvB,KAAKR,UAAL;MAAiB,OAAO,EAAC,GAAGQ,KAAJ;QAAWF,MAAM,EAAEG,MAAM,CAACE;MAA1B,CAAP;;IAEjB;AACR;AACA;;IAEQ,KAAKV,WAAL;MAAkBW,OAAO,CAACC,GAAR,CAAYJ,MAAM,CAACE,OAAnB;MAClB,IAAIG,OAAO,GAAG,CAAC,GAAGN,KAAK,CAACJ,UAAV,CAAd;MACA,IAAIW,QAAQ,GAAGN,MAAM,CAACE,OAAP,CAAeK,cAA9B;MACA,IAAIC,OAAO,GAAGR,MAAM,CAACE,OAAP,CAAeO,aAA7B;MACA,IAAIC,MAAM,GAAGV,MAAM,CAACE,OAAP,CAAeS,YAA5B;MACAR,OAAO,CAACC,GAAR,CAAYM,MAAZ;MAEA,IAAGA,MAAH,EAAWL,OAAO,GAAGA,OAAO,CAACO,MAAR,CAAeC,EAAE,IAAIA,EAAE,CAACC,IAAH,CAAQC,WAAR,GAAsBC,QAAtB,CAA+BN,MAAM,CAACK,WAAP,EAA/B,CAArB,CAAV;MAEX,IAAGf,MAAM,CAACE,OAAP,CAAeO,aAAf,KAAiC,KAApC,EAA2CJ,OAAO,GAAGA,OAAO,CAACO,MAAR,CAAeK,SAAS,IAAIjB,MAAM,CAACE,OAAP,CAAeO,aAAf,IAAgCQ,SAAS,CAACpB,MAAV,CAAiBqB,IAAjB,CAAsBC,KAAK,IAAIA,KAAK,CAACL,IAAN,IAAcd,MAAM,CAACE,OAAP,CAAeO,aAA5D,EAA2EK,IAAvI,CAAV,CAT3C,CAWA;MACA;MACA;MACA;;MAGAX,OAAO,CAACC,GAAR,CAAYC,OAAZ;MAEA,OAAO,EAAC,GAAGN,KAAJ;QAAWL,kBAAkB,EAAEW;MAA/B,CAAP;IAEA;;IAEA;MAAS,OAAO,EAAC,GAAGN;MAAJ,CAAP;EAxCb;AA2CH"},"metadata":{},"sourceType":"module"}