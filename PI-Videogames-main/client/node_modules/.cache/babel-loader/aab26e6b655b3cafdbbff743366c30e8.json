{"ast":null,"code":"import { GET_VIDEOGAME_DETAIL, DELETE_VIDEOGAME, CREATE_VIDEOGAME, GET_ALL_VIDEOGAMES, GET_GENRES, GET_FILTERS, GET_ORDERS, CLEAN_DETAIL, SET_LOADING } from '../actions/index';\nconst initialState = {\n  filteredVideogames: [],\n  videogames: [],\n  videogameDetail: [],\n  genres: [],\n  loading: true\n};\nexport default function rootReducer() {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case GET_ALL_VIDEOGAMES:\n      return { ...state,\n        videogames: action.payload,\n        filteredVideogames: action.payload,\n        loading: false\n      };\n\n    case GET_VIDEOGAME_DETAIL:\n      return { ...state,\n        videogameDetail: [action.payload],\n        loading: false\n      };\n\n    case CREATE_VIDEOGAME:\n      return { ...state,\n        videogames: [...state.videogames, action.payload.game],\n        msg: action.payload.msg\n      };\n\n    case DELETE_VIDEOGAME:\n      return { ...state\n      };\n\n    case CLEAN_DETAIL:\n      return { ...state,\n        videogameDetail: []\n      };\n\n    case SET_LOADING:\n      return { ...state,\n        loading: true\n      };\n\n    case GET_GENRES:\n      return { ...state,\n        genres: action.payload\n      };\n\n    case GET_FILTERS:\n      let filters = [...state.videogames];\n      let byOrigin = action.payload.filterByOrigin;\n      let byGenre = action.payload.filterByGenre;\n      let byName = action.payload.searchByName;\n      let byPlatforms = action.payload.filterByPlatforms;\n\n      if (byGenre.length > 0) {\n        if (byGenre.includes('All')) {} else {\n          for (let i = 0; i < byGenre.length; i++) {\n            filters = filters.filter(videogame => {\n              let genre = videogame.genres.find(vg => vg.name.includes(byGenre[i]));\n              return genre;\n            });\n          }\n        }\n      }\n\n      if (byPlatforms.length > 0) {\n        if (byPlatforms.includes('All Platforms')) {} else {\n          for (let i = 0; i < byPlatforms.length; i++) {\n            filters = filters.filter(videogame => {\n              let platform = videogame.platforms.find(p => p == byPlatforms[i]);\n              return platform;\n            });\n          }\n        }\n      }\n\n      if (byOrigin === 'Created') filters = filters.filter(videogame => videogame.createdOnDb === true);\n      if (byOrigin === 'Api') filters = filters.filter(videogame => videogame.createdOnDb === undefined);\n      if (byOrigin === 'All Games' && byGenre === 'All Genres') filters = [...state.videogames];\n      if (byName) filters = filters.filter(vg => vg.name.toLowerCase().includes(byName.toLowerCase()));\n      return { ...state,\n        filteredVideogames: filters,\n        loading: false\n      };\n\n    case GET_ORDERS:\n      let vgOrder = [...state.filteredVideogames];\n      let byOrder = action.payload;\n      let byRating = action.payload;\n      if (byOrder === 'descending') vgOrder = vgOrder.sort((a, b) => {\n        if (a.rating < b.rating) return 1;\n        if (a.rating > b.rating) return -1;\n        return 0;\n      });\n      if (byOrder === 'ascending') vgOrder = vgOrder.sort((a, b) => {\n        if (a.rating > b.rating) return 1;\n        if (a.rating < b.rating) return -1;\n        return 0;\n      });\n      if (byRating === 'a-z') vgOrder = vgOrder.sort((a, b) => a.name.localeCompare(b.name));\n      if (byRating === 'z-a') vgOrder = vgOrder.sort((a, b) => b.name.localeCompare(a.name));\n      return { ...state,\n        filteredVideogames: vgOrder\n      };\n\n    default:\n      return { ...state\n      };\n  }\n}","map":{"version":3,"names":["GET_VIDEOGAME_DETAIL","DELETE_VIDEOGAME","CREATE_VIDEOGAME","GET_ALL_VIDEOGAMES","GET_GENRES","GET_FILTERS","GET_ORDERS","CLEAN_DETAIL","SET_LOADING","initialState","filteredVideogames","videogames","videogameDetail","genres","loading","rootReducer","state","action","type","payload","game","msg","filters","byOrigin","filterByOrigin","byGenre","filterByGenre","byName","searchByName","byPlatforms","filterByPlatforms","length","includes","i","filter","videogame","genre","find","vg","name","platform","platforms","p","createdOnDb","undefined","toLowerCase","vgOrder","byOrder","byRating","sort","a","b","rating","localeCompare"],"sources":["/Users/joaco/Desktop/Henry/PI-videogames/PI-Videogames-main/client/src/reducers/index.js"],"sourcesContent":["import { GET_VIDEOGAME_DETAIL, DELETE_VIDEOGAME, CREATE_VIDEOGAME, GET_ALL_VIDEOGAMES, GET_GENRES, GET_FILTERS, GET_ORDERS, CLEAN_DETAIL, SET_LOADING} from '../actions/index';\n\n\nconst initialState = {\n    filteredVideogames: [],\n    videogames: [],\n    videogameDetail:[],\n    genres: [],\n    loading: true\n}\n\nexport default function rootReducer(state = initialState, action) {\n\n    switch(action.type) {\n        case GET_ALL_VIDEOGAMES: return {...state, videogames: action.payload, filteredVideogames:action.payload, loading:false}\n\n        case GET_VIDEOGAME_DETAIL: return {...state, videogameDetail: [action.payload], loading:false}\n\n        case CREATE_VIDEOGAME: return {...state, videogames: [...state.videogames, action.payload.game], msg: action.payload.msg}\n\n        case DELETE_VIDEOGAME: return {...state}\n\n        case CLEAN_DETAIL: return {...state, videogameDetail: []}\n\n        case SET_LOADING: return {...state, loading: true}\n\n        case GET_GENRES: return {...state, genres: action.payload}\n\n        case GET_FILTERS: \n        let filters = [...state.videogames]\n        let byOrigin = action.payload.filterByOrigin\n        let byGenre = action.payload.filterByGenre\n        let byName = action.payload.searchByName\n        let byPlatforms = action.payload.filterByPlatforms\n\n          if(byGenre.length > 0) { \n            if (byGenre.includes('All')) {\n                \n            } else {\n                for (let i = 0; i < byGenre.length; i++) {\n                    filters = filters.filter(videogame => {\n                        let genre = videogame.genres.find(vg => vg.name.includes(byGenre[i]))\n                        return genre})\n                }\n            }\n            }\n        \n                if(byPlatforms.length > 0) { \n                    if(byPlatforms.includes('All Platforms')) {\n                    }\n                    else {for (let i = 0; i < byPlatforms.length; i++) {\n                            filters = filters.filter(videogame => {\n                                let platform = videogame.platforms.find(p => p == byPlatforms[i])\n                                return platform})}\n                        }\n                        }\n\n\n                \n        if(byOrigin === 'Created') filters = filters.filter(videogame => videogame.createdOnDb === true)\n        if(byOrigin === 'Api')  filters = filters.filter(videogame => videogame.createdOnDb === undefined)\n        if(byOrigin === 'All Games' && byGenre === 'All Genres') filters =[...state.videogames]\n            \n        if(byName) filters = filters.filter(vg => vg.name.toLowerCase().includes(byName.toLowerCase()))\n            \n        return {...state, filteredVideogames: filters, loading: false}\n\n        case GET_ORDERS:\n        let vgOrder = [...state.filteredVideogames]\n        let byOrder = action.payload\n        let byRating = action.payload\n    \n        if(byOrder === 'descending') vgOrder = vgOrder.sort((a,b) => {\n            if(a.rating < b.rating) return 1\n            if(a.rating > b.rating) return -1\n            return 0})\n\n        if(byOrder === 'ascending') vgOrder = vgOrder.sort((a,b) => {\n             if(a.rating > b.rating) return 1\n             if(a.rating < b.rating) return -1\n             return 0})\n\n        if(byRating === 'a-z') vgOrder = vgOrder.sort((a,b) => a.name.localeCompare(b.name))\n        if(byRating === 'z-a') vgOrder = vgOrder.sort((a,b) => b.name.localeCompare(a.name))\n\n        return {...state, filteredVideogames: vgOrder}\n        \n        default: return {...state}\n\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}