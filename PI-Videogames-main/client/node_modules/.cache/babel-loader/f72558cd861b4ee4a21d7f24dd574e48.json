{"ast":null,"code":"import { GET_VIDEOGAME_DETAIL, GET_SEARCH_VIDEOGAMES, DELETE_VIDEOGAME, CREATE_VIDEOGAME, GET_ALL_VIDEOGAMES, GET_GENRES, GET_FILTERS, GET_ORDERS } from '../actions/index';\nconst initialState = {\n  filteredVideogames: [],\n  videogames: [],\n  videogameDetail: [],\n  genres: [],\n  orders: []\n};\nexport default function rootReducer() {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case GET_ALL_VIDEOGAMES:\n      return { ...state,\n        videogames: action.payload,\n        filteredVideogames: action.payload\n      };\n\n    case GET_SEARCH_VIDEOGAMES:\n      return { ...state,\n        videogames: action.payload\n      };\n\n    case GET_VIDEOGAME_DETAIL:\n      return { ...state,\n        videogameDetail: [action.payload]\n      };\n\n    case CREATE_VIDEOGAME:\n      return { ...state\n      };\n\n    case DELETE_VIDEOGAME:\n      return { ...state\n      };\n\n    case GET_GENRES:\n      return { ...state,\n        genres: action.payload\n      };\n\n    case GET_FILTERS:\n      let filters = [...state.videogames];\n      let byOrigin = action.payload.filterByOrigin;\n      let byGenre = action.payload.filterByGenre;\n      let byName = action.payload.searchByName;\n      console.log(byGenre);\n      if (byName) filters = filters.filter(vg => vg.name.toLowerCase().includes(byName.toLowerCase())); //    console.log(filters)\n      // console.log(filters.genres.filter(vg => vg.name.includes(byGenre)))\n\n      if (byGenre !== 'all') {\n        filters = filters.filter(videogame => {\n          let genre = videogame.genres.find(vg => vg.name.includes(byGenre));\n          return genre;\n        });\n      }\n\n      if (byOrigin === 'all') filters = [...state.videogames];\n      if (byOrigin === 'db') filters = filters.filter(videogame => videogame.createdOnDb === true);\n      if (byOrigin === 'api') filters = filters.filter(videogame => videogame.createdOnDb === undefined);\n      return { ...state,\n        filteredVideogames: filters\n      };\n\n    case GET_ORDERS:\n      let vgOrder = [...state.filteredVideogames];\n      let byOrder = action.payload;\n      let byRating = action.payload;\n      console.log(byRating);\n      if (byOrder === 'ascending') vgOrder = vgOrder.sort((a, b) => {\n        if (a.rating < b.rating) return 1;\n        if (a.rating > b.rating) return -1;\n        return 0;\n      });\n      if (byOrder === 'descending') vgOrder = vgOrder.sort((a, b) => {\n        if (a.rating > b.rating) return 1;\n        if (a.rating < b.rating) return -1;\n        return 0;\n      });\n      if (byRating === 'a-z') vgOrder = vgOrder.sort((a, b) => a.name.localeCompare(b.name));\n      if (byRating === 'z-a') vgOrder = vgOrder.sort((a, b) => b.name.localeCompare(a.name));\n      if (!vgOrder.length) vgOrder = new Error('No se encontraron videojuegos');\n      return { ...state,\n        filteredVideogames: vgOrder\n      };\n\n    default:\n      return { ...state\n      };\n  }\n}","map":{"version":3,"names":["GET_VIDEOGAME_DETAIL","GET_SEARCH_VIDEOGAMES","DELETE_VIDEOGAME","CREATE_VIDEOGAME","GET_ALL_VIDEOGAMES","GET_GENRES","GET_FILTERS","GET_ORDERS","initialState","filteredVideogames","videogames","videogameDetail","genres","orders","rootReducer","state","action","type","payload","filters","byOrigin","filterByOrigin","byGenre","filterByGenre","byName","searchByName","console","log","filter","vg","name","toLowerCase","includes","videogame","genre","find","createdOnDb","undefined","vgOrder","byOrder","byRating","sort","a","b","rating","localeCompare","length","Error"],"sources":["/Users/joaco/Desktop/Henry/PI-videogames/PI-Videogames-main/client/src/reducers/index.js"],"sourcesContent":["import { GET_VIDEOGAME_DETAIL, GET_SEARCH_VIDEOGAMES, DELETE_VIDEOGAME, CREATE_VIDEOGAME, GET_ALL_VIDEOGAMES, GET_GENRES, GET_FILTERS, GET_ORDERS} from '../actions/index';\n\n\nconst initialState = {\n    filteredVideogames: [],\n    videogames: [],\n    videogameDetail:[],\n    genres: [],\n    orders: []\n}\n\nexport default function rootReducer(state = initialState, action) {\n\n    switch(action.type) {\n        case GET_ALL_VIDEOGAMES: return {...state, videogames: action.payload, filteredVideogames:action.payload}\n\n        case GET_SEARCH_VIDEOGAMES: return {...state, videogames: action.payload}\n\n        case GET_VIDEOGAME_DETAIL: return {...state, videogameDetail: [action.payload]}\n\n        case CREATE_VIDEOGAME: return {...state}\n\n        case DELETE_VIDEOGAME: return {...state}\n\n        case GET_GENRES: return {...state, genres: action.payload}\n\n        case GET_FILTERS: \n        let filters = [...state.videogames]\n        let byOrigin = action.payload.filterByOrigin\n        let byGenre = action.payload.filterByGenre\n        let byName = action.payload.searchByName\n        console.log(byGenre)\n      \n        if(byName) filters = filters.filter(vg => vg.name.toLowerCase().includes(byName.toLowerCase()))\n    //    console.log(filters)\n        // console.log(filters.genres.filter(vg => vg.name.includes(byGenre)))\n\n        if(byGenre !== 'all') { \n                filters = filters.filter(videogame => {\n                let genre = videogame.genres.find(vg => vg.name.includes(byGenre))\n                return genre})\n        }\n\n        if(byOrigin === 'all') filters =[...state.videogames]\n        if(byOrigin === 'db') filters = filters.filter(videogame => videogame.createdOnDb === true)\n        if(byOrigin === 'api')  filters = filters.filter(videogame => videogame.createdOnDb === undefined)\n\n        return {...state, filteredVideogames: filters}\n\n        case GET_ORDERS:\n        let vgOrder = [...state.filteredVideogames]\n        let byOrder = action.payload\n        let byRating = action.payload\n        console.log(byRating)\n    \n        if(byOrder === 'ascending') vgOrder = vgOrder.sort((a,b) => {\n            if(a.rating < b.rating) return 1\n            if(a.rating > b.rating) return -1\n            return 0})\n\n        if(byOrder === 'descending') vgOrder = vgOrder.sort((a,b) => {\n             if(a.rating > b.rating) return 1\n             if(a.rating < b.rating) return -1\n             return 0})\n\n        if(byRating === 'a-z') vgOrder = vgOrder.sort((a,b) => a.name.localeCompare(b.name))\n        if(byRating === 'z-a') vgOrder = vgOrder.sort((a,b) => b.name.localeCompare(a.name))\n        \n        if(!vgOrder.length) vgOrder = new Error('No se encontraron videojuegos')\n\n        return {...state, filteredVideogames: vgOrder}\n        \n        default: return {...state}\n\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}